// uses https://github.com/PKief/vscode-material-icon-theme
const { parse } = require('url');

module.exports = (req, res) => {
  let {
    query: { icon }
  } = parse(req.url, true);

  if (
    icon === 'png' ||
    icon === 'jpg' ||
    icon === 'jpeg' ||
    icon === 'gif' ||
    icon === 'ico'
  ) {
    icon = 'image';
  }

  if (icon === 'txt') {
    icon = 'file';
  }

  const svg = {
    js: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="m3 3h18v18h-18v-18m4.73 15.04c.4.85 1.19 1.55 2.54 1.55 1.5 0 2.53-.8 2.53-2.55v-5.78h-1.7v5.74c0 .86-.35 1.08-.9 1.08-.58 0-.82-.4-1.09-.87l-1.38.83m5.98-.18c.5.98 1.51 1.73 3.09 1.73 1.6 0 2.8-.83 2.8-2.36 0-1.41-.81-2.04-2.25-2.66l-.42-.18c-.73-.31-1.04-.52-1.04-1.02 0-.41.31-.73.81-.73.48 0 .8.21 1.09.73l1.31-.87c-.55-.96-1.33-1.33-2.4-1.33-1.51 0-2.48.96-2.48 2.23 0 1.38.81 2.03 2.03 2.55l.42.18c.78.34 1.24.55 1.24 1.13 0 .48-.45.83-1.15.83-.83 0-1.31-.43-1.67-1.03l-1.38.8z" fill="#ffca28"/>
  </svg>`,
    html: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="m12 17.56l4.07-1.13.55-6.1h-7.24l-.18-2.03h7.6l.2-1.99h-10l.56 6.01h6.89l-.23 2.58-2.22.6-2.22-.6-.14-1.66h-2l.29 3.19 4.07 1.13m-7.93-14.56h15.86l-1.43 16.2-6.5 1.8-6.5-1.8-1.43-16.2z" fill="#e44d26"/>
  </svg>`,
    ts: `<svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <path d="m46 46v408h408v-408h-408zm310.02 198.17v.00586c3.9124.01226 8.3586.21357 11.703.57617 13.619 1.4734 24.225 7.349 33.248 18.416 4.4934 5.5129 6.0307 7.9253 5.7031 8.957-.21108.66564-3.294 2.874-13.096 9.3809-9.6287 6.3921-12.731 8.3066-13.451 8.3066-.73045 0-2.2517-1.5657-4.4453-4.5723-4.2244-5.7892-8.5373-8.4314-15.205-9.3125-7.1704-.9496-13.602 1.3105-16.752 5.8887-2.6923 3.9112-3.099 10.206-.95899 14.779 2.4792 5.2976 6.9671 8.2262 24.166 15.768 19.836 8.6975 29.888 14.651 37.209 22.039 7.8838 7.9563 11.878 17.143 13.105 30.137.59907 6.3332-.13284 13.84-1.9453 19.943-4.4447 14.961-16.439 25.916-34.02 31.072-4.8597 1.4248-9.3818 2.276-13.855 2.6035-6.8282.50274-16.603.22572-22.486-.63086-14.884-2.1677-31.686-10.829-40.064-20.65-4.1128-4.8205-9.3633-12.754-9.3633-14.15 0-.67351.33372-1.0557 1.6562-1.8965 3.9213-2.4911 26.394-15.338 26.83-15.338.26345 0 1.4373 1.3838 2.6074 3.0742 2.6512 3.8278 9.17 10.407 12.484 12.602 2.7074 1.7928 6.1691 3.2327 10.279 4.2715 2.3539.5868 3.6002.69141 8.7363.69141 5.2475-.00176 6.3243-.0901 8.6719-.72071 6.2096-1.6713 11.057-5.1293 13.111-9.3535.90039-1.8254.91797-2.0533.91797-6.4805v-4.5898l-1.1035-2.1894c-2.6734-5.3067-8.4338-8.9474-26.645-16.836-8.3655-3.6237-18.611-8.733-22.611-11.275-9.1282-5.801-15.455-12.433-19.607-20.551-4.13-8.073-4.7459-11.078-4.7559-23.217-.01017-9.5024-.02592-9.3858 1.9414-15.451 1.785-5.5038 5.439-11.652 9.4727-15.939 8.0511-8.5582 19.813-14.058 32.406-15.152 1.6108-.15244 3.768-.21208 6.1152-.20508zm-108.36 1.877h.00391c24.253.01227 38.156.0962 38.379.23633.42036.2603.47265 2.3708.47265 15.842v15.541l-24.201.08789-24.201.08789v68.713c0 37.793-.07654 68.938-.18164 69.213-.17115.46249-2.0325.49805-17.779.49805h-17.588l-.18164-.71094c-.11745-.39011-.20308-31.536-.20508-69.213l-.00586-68.504-24.201-.08594-24.201-.08789v-15.357c0-12.18.08414-15.442.4082-15.766.333-.34334 12.684-.43187 65.902-.48437 10.261-.01034 19.495-.01477 27.58-.00977z" fill="#0288d1"/>
  </svg>`,
    css: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="m5 3l-.65 3.34h13.59l-.44 2.16h-13.58l-.66 3.33h13.59l-.76 3.81-5.48 1.81-4.75-1.81.33-1.64h-3.34l-.79 4 7.85 3 9.05-3 1.2-6.03.24-1.21 1.54-7.76h-16.94z" fill="#42a5f5"/>
  </svg>`,
    lambda: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="21" height="21" fill="black"/>
    <path d="M4 17.9025H6.951L10.1848 10.9695H10.396L12.3736 15.87C13.0301 17.496 13.8377 18 15.7 18C16.2151 18 16.6604 17.952 17 17.8545V15.9855C16.8131 16.0155 16.6133 16.053 16.4378 16.053C15.5944 16.053 15.1849 15.792 14.8209 14.949L11.3548 6.864C10.032 3.774 8.95625 3 6.62275 3C6.16775 3 5.8265 3.048 5.417 3.135V5.004C5.73388 4.9665 5.885 4.947 6.0735 4.947C7.4905 4.947 7.9 5.256 8.719 7.047L9.10575 7.92L4 17.9025Z" fill="white"/>
    </svg>
    `,
    svg: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m5.13 10.71h3.74l-2.65-2.65c-1.01 0-1.83-.82-1.83-1.84a1.83 1.83 0 0 1 1.83-1.83c1.02 0 1.84.82 1.84 1.83l2.65 2.65v-3.74c-.71-.72-.71-1.88 0-2.59.71-.72 1.87-.72 2.58 0 .71.71.71 1.87 0 2.59v3.74l2.66-2.65c0-1.01.81-1.83 1.83-1.83 1.01 0 1.83.82 1.83 1.83 0 1.02-.82 1.84-1.83 1.84l-2.65 2.65h3.74c.72-.71 1.88-.71 2.59 0 .72.71.72 1.87 0 2.58-.71.71-1.87.71-2.59 0h-3.74l2.65 2.66c1.01 0 1.83.81 1.83 1.83a1.83 1.83 0 0 1-1.83 1.83c-1.02 0-1.83-.82-1.83-1.83l-2.66-2.65v3.74c.71.72.71 1.88 0 2.59-.71.72-1.87.72-2.58 0-.71-.71-.71-1.87 0-2.59v-3.74l-2.65 2.65c0 1.01-.82 1.83-1.84 1.83-1.01 0-1.83-.82-1.83-1.83 0-1.02.82-1.83 1.83-1.83l2.65-2.66h-3.74c-.72.71-1.88.71-2.59 0-.72-.71-.72-1.87 0-2.58.71-.71 1.87-.71 2.59 0z" style="fill:#ffb300"/></svg>`,
    json: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m5 3h2v2h-2v5a2 2 0 0 1 -2 2 2 2 0 0 1 2 2v5h2v2h-2c-1.07-.27-2-.9-2-2v-4a2 2 0 0 0 -2 -2h-1v-2h1a2 2 0 0 0 2 -2v-4a2 2 0 0 1 2 -2m14 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0 -2 2v4a2 2 0 0 1 -2 2h-2v-2h2v-5a2 2 0 0 1 2 -2 2 2 0 0 1 -2 -2v-5h-2v-2h2m-7 12a1 1 0 0 1 1 1 1 1 0 0 1 -1 1 1 1 0 0 1 -1 -1 1 1 0 0 1 1 -1m-4 0a1 1 0 0 1 1 1 1 1 0 0 1 -1 1 1 1 0 0 1 -1 -1 1 1 0 0 1 1 -1m8 0a1 1 0 0 1 1 1 1 1 0 0 1 -1 1 1 1 0 0 1 -1 -1 1 1 0 0 1 1 -1z" style="fill:#fbc02d"/></svg>`,
    go: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(.28169 -.13395)">
    <g fill="#73cddc">
    <path d="m10.575 1.6953c-2.6341 0-4.7565 2.453-4.7565 5.5017v4.5995c-.00877-.000751-.017765-.0015-.026536-.0022v4.7101c0 3.0487 2.1224 5.5017 4.7565 5.5017h2.2865c2.6341 0 4.7565-2.453 4.7565-5.5017v-4.5995c.0088.000749.01777.0015.02654.0022v-4.7101c0-3.0487-2.1224-5.5017-4.7565-5.5017h-2.2865z"/>
    <rect transform="matrix(.48489 -.87457 .85979 .51065 0 0)" x="-1.1775" y="6.0925" width="2.2886" height="3.335" ry="1.1246"/>
    <rect transform="matrix(.44646 .8948 -.89204 .45195 0 0)" x="10.261" y="-15.076" width="2.297" height="3.3904" ry="1.1433"/>
    </g>
    <circle cx="9.2673" cy="5.1301" r="2.0545" fill="#fff" stroke="#5e5d5b" stroke-width=".1"/>
    <circle cx="14.214" cy="5.1156" r="2.0545" fill="#fff" stroke="#5e5d5b" stroke-width=".1"/>
    <ellipse cx="8.039" cy="5.0512" rx=".79244" ry=".90067" fill="#030d18"/>
    <path d="m11.792 9.5557.76303.13832a.40286 .68856 0 0 1 .008 .13832 .40286 .68856 0 0 1 -.40259 .68923 .40286 .68856 0 0 1 -.40332 -.68923 .40286 .68856 0 0 1 .03488 -.27664z" fill="#fff" stroke="#fff" stroke-width=".15521"/>
    <ellipse cx="8.5097" cy="5.3647" rx=".13796" ry=".16614" fill="#fff"/>
    <ellipse cx="12.945" cy="5.1891" rx=".79244" ry=".90067" fill="#030d18"/>
    <ellipse cx="13.414" cy="5.4461" rx=".13796" ry=".16614" fill="#fff"/>
    <ellipse transform="matrix(-.63477 -.7727 .7727 -.63477 0 0)" cx="-12.982" cy="-3.4087" rx=".70762" ry="1.026" fill="#f6d2a1"/>
    <path d="m11.772 9.5526-.75678.13495a.39956 .6718 0 0 0 -.0079 .13495 .39956 .6718 0 0 0 .39929 .67245 .39956 .6718 0 0 0 .40001 -.67245 .39956 .6718 0 0 0 -.0346 -.2699z" fill="#fff" stroke="#fff" stroke-width=".15268"/>
    <g fill="#f6d2a1">
    <ellipse transform="matrix(.63477 -.7727 -.7727 -.63477 0 0)" cx="1.8408" cy="-21.563" rx=".70736" ry="1.0257"/>
    <ellipse transform="matrix(.3054 -.95222 -.97065 -.24051 0 0)" cx="-17.281" cy="-21.784" rx=".86445" ry="1.2703"/>
    <ellipse transform="matrix(.22652 .97401 .95652 -.29167 0 0)" cx="22.885" cy="2.5872" rx=".86445" ry="1.2703"/>
    <path d="m10.708 8.3921c-.32934 0-.59377.26653-.59377.59734v.11487c0 .33081.26444.59734.59377.59734h.38609a.97346 .77195 0 0 1 .69716 -.23434 .97346 .77195 0 0 1 .69807 .23434h.33394c.32934 0 .59469-.26654.59469-.59734v-.11487c0-.33081-.26535-.59734-.59469-.59734h-2.1153z" stroke="#657075" stroke-width=".1"/>
    </g>
    <ellipse cx="11.734" cy="8.2031" rx="1.2084" ry=".68013" fill="#030d18" stroke="#fff" stroke-width=".162"/>
    </g>
    </svg>`,
    php: `<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24"><path d="M12,18.08C5.37,18.08 0,15.36 0,12C0,8.64 5.37,5.92 12,5.92C18.63,5.92 24,8.64 24,12C24,15.36 18.63,18.08 12,18.08M6.81,10.13C7.35,10.13 7.72,10.23 7.9,10.44C8.08,10.64 8.12,11 8.03,11.47C7.93,12 7.74,12.34 7.45,12.56C7.17,12.78 6.74,12.89 6.16,12.89H5.29L5.82,10.13H6.81M3.31,15.68H4.75L5.09,13.93H6.32C6.86,13.93 7.3,13.87 7.65,13.76C8,13.64 8.32,13.45 8.61,13.18C8.85,12.96 9.04,12.72 9.19,12.45C9.34,12.19 9.45,11.89 9.5,11.57C9.66,10.79 9.55,10.18 9.17,9.75C8.78,9.31 8.18,9.1 7.35,9.1H4.59L3.31,15.68M10.56,7.35L9.28,13.93H10.7L11.44,10.16H12.58C12.94,10.16 13.18,10.22 13.29,10.34C13.4,10.46 13.42,10.68 13.36,11L12.79,13.93H14.24L14.83,10.86C14.96,10.24 14.86,9.79 14.56,9.5C14.26,9.23 13.71,9.1 12.91,9.1H11.64L12,7.35H10.56M18,10.13C18.55,10.13 18.91,10.23 19.09,10.44C19.27,10.64 19.31,11 19.22,11.47C19.12,12 18.93,12.34 18.65,12.56C18.36,12.78 17.93,12.89 17.35,12.89H16.5L17,10.13H18M14.5,15.68H15.94L16.28,13.93H17.5C18.05,13.93 18.5,13.87 18.85,13.76C19.2,13.64 19.5,13.45 19.8,13.18C20.04,12.96 20.24,12.72 20.38,12.45C20.53,12.19 20.64,11.89 20.7,11.57C20.85,10.79 20.74,10.18 20.36,9.75C20,9.31 19.37,9.1 18.54,9.1H15.79L14.5,15.68Z" fill="#1E88E5" /></svg>`,
    image: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="m12.976 9.0724h5.3677l-5.3677-5.3677v5.3677m-6.8316-6.8316h7.8075l5.8557 5.8557v11.711a1.9519 1.9519 0 0 1 -1.9519 1.9519h-11.711c-1.0833 0-1.9519-.87835-1.9519-1.9519v-15.615c0-1.0833.86859-1.9519 1.9519-1.9519m0 17.567h11.711v-7.8075l-3.9038 3.9038-1.9519-1.9519-5.8557 5.8557m1.9519-10.735a1.9519 1.9519 0 0 0 -1.9519 1.9519 1.9519 1.9519 0 0 0 1.9519 1.9519 1.9519 1.9519 0 0 0 1.9519 -1.9519 1.9519 1.9519 0 0 0 -1.9519 -1.9519z" fill="#26a69a" stroke-width=".97594"/>
    </svg>`,
    'js-map': `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(-.22193 -.25318)" fill="#ffca28">
    <path d="m18 8v2h2v10h-10v-2h-2v4h14v-14z"/>
    <path d="m2.4439 2.5064h14.136v14.136h-14.136v-14.136m3.7145 11.811c.31412.66751.93452 1.2172 1.9947 1.2172 1.178 0 1.9868-.62825 1.9868-2.0025v-4.5391h-1.335v4.5077c0 .67537-.27486.84814-.70678.84814-.45548 0-.64396-.31412-.85599-.68322l-1.0837.65181m4.6962-.14136c.39266.7696 1.1858 1.3586 2.4266 1.3586 1.2565 0 2.1989-.65181 2.1989-1.8533 0-1.1073-.6361-1.602-1.767-2.0889l-.32983-.14136c-.57328-.24345-.81672-.40836-.81672-.80102 0-.32198.24345-.57328.6361-.57328.37695 0 .62825.16492.85599.57328l1.0288-.68322c-.43192-.7539-1.0445-1.0445-1.8847-1.0445-1.1858 0-1.9476.7539-1.9476 1.7512 0 1.0837.6361 1.5942 1.5942 2.0025l.32983.14136c.61254.26701.97379.43192.97379.8874 0 .37695-.35339.65181-.90311.65181-.65181 0-1.0288-.33768-1.3115-.80887z"/>
    </g>
    </svg>`,
    file: `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 9h5.5l-5.5-5.5v5.5m-7-7h8l6 6v12a2 2 0 0 1 -2 2h-12c-1.11 0-2-.9-2-2v-16c0-1.11.89-2 2-2m5 2h-5v16h5 7v-9h-7v-7z" fill="#42a5f5"/>
    </svg>`,
    'css-map': `<svg version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(-.23339 -.5)"><path d="m18 8v2h2v10h-10v-2h-2v4h14v-14z" style="fill:#42a5f5"/><path d="m4.6759 3-.48842 2.5097h10.212l-.33062 1.6231h-10.204l-.49593 2.5022h10.212l-.57107 2.8629-4.1177 1.3601-3.5692-1.3601.24797-1.2323h-2.5097l-.59362 3.0056 5.8986 2.2542 6.8003-2.2542.9017-4.531.18034-.90921 1.1572-5.831z" style="fill:#42a5f5"/></g></svg>`
  }[icon];

  res.setHeader('Content-Type', 'image/svg+xml');
  res.end(svg);
};
